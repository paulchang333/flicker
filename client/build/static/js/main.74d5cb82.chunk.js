(this["webpackJsonpmovie-tinder"]=this["webpackJsonpmovie-tinder"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var s,r,c,a,i,o=n(0),u=n(1),l=n.n(u),d=n(69),j=n.n(d),b=n(10),p=(n(79),n(4)),f=n.n(p),h=n(8),m=n(2),O=n(9),x=n.n(O),g=Object(u.createContext)({}),v=function(e){var t=e.children,n=Object(u.useState)({token:void 0,user:void 0}),s=Object(m.a)(n,2),r=s[0],c=s[1],a=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,x.a.post("/api/users/isTokenValid",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,x.a.get("/api/users/loggedInUser",{headers:{"x-auth-token":t}});case 8:n=e.sent,c({token:t,user:n.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){a()}),[]),Object(o.jsx)(g.Provider,{value:{userData:r,setUserData:c},children:t})},w=Object(u.createContext)([{},function(){}]),_=function(e){var t=e.children,n=Object(u.useState)({isMovie:!1,isSeries:!1,selectedGenres:[],results:[]}),s=Object(m.a)(n,2),r=s[0],c=s[1];return Object(o.jsx)(w.Provider,{value:{showData:r,setShowData:c},children:t})},y=n(6),S=(n(97),function(e){var t=Object(u.useContext)(g).userData,n=Object(y.f)();return Object(u.useEffect)((function(){t.user||n.push("/login")})),Object(o.jsx)("div",{className:"page home-page",children:Object(o.jsxs)("div",{className:"home-page__container",children:[Object(o.jsx)("h1",{className:"home-page__title",children:"Welcome to flicker!"}),Object(o.jsx)("h3",{className:"home-page__description",children:"Start your own session, or join someone else's session"}),Object(o.jsxs)("div",{className:"home-page__button-row",children:[Object(o.jsx)("button",{onClick:function(){return n.push("/session?creator=true")},children:"Start Session"}),Object(o.jsx)("button",{onClick:function(){return n.push("/join")},children:"Join Session"})]})]})})}),N=(n(102),n(103),function(e){return Object(o.jsxs)("div",{className:"error-notice",children:[Object(o.jsx)("span",{children:e.message}),Object(o.jsx)("button",{onClick:e.clearError,children:"X"})]})}),k=function(){var e=Object(u.useState)(""),t=Object(m.a)(e,2),n=t[0],s=t[1],r=Object(u.useState)(""),c=Object(m.a)(r,2),a=c[0],i=c[1],l=Object(u.useState)(""),d=Object(m.a)(l,2),j=d[0],b=d[1],p=Object(u.useState)(""),O=Object(m.a)(p,2),v=O[0],w=O[1],_=Object(u.useState)(""),S=Object(m.a)(_,2),k=S[0],C=S[1],D=Object(u.useContext)(g).setUserData,E=Object(y.f)(),I=function(){var e=Object(h.a)(f.a.mark((function e(t){var s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,s={name:n,email:a,password:j,passwordCheck:v},e.next=5,x.a.post("/api/users/register",s);case 5:return e.next=7,x.a.post("/api/users/login",{email:a,password:j});case 7:r=e.sent,D({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),localStorage.setItem("room-id",""),E.push("/"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0.response.data.msg&&C(e.t0.response.data.msg);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){localStorage.setItem("room-id","")}),[]),Object(o.jsxs)("div",{className:"page",children:[Object(o.jsx)("h2",{children:"Register"}),Object(o.jsxs)("form",{className:"register-page__form form",onSubmit:I,children:[Object(o.jsx)("label",{htmlFor:"register-name",children:"Full name"}),Object(o.jsx)("input",{id:"register-name",type:"text",onChange:function(e){return s(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"register-email",children:"Email"}),Object(o.jsx)("input",{id:"register-email",type:"email",onChange:function(e){return i(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"register-password",children:"Password"}),Object(o.jsx)("input",{id:"register-password",type:"password",onChange:function(e){return b(e.target.value)}}),Object(o.jsx)("input",{type:"password",placeholder:"Verify password",onChange:function(e){return w(e.target.value)}}),Object(o.jsx)("input",{type:"submit",value:"Register"})]}),k&&Object(o.jsx)(N,{message:k,clearError:function(){return C(void 0)}})]})},C=(n(104),function(){var e=Object(u.useState)(void 0),t=Object(m.a)(e,2),n=t[0],s=t[1],r=Object(u.useState)(void 0),c=Object(m.a)(r,2),a=c[0],i=c[1],l=Object(u.useState)(void 0),d=Object(m.a)(l,2),j=d[0],b=d[1],p=Object(u.useContext)(g).setUserData,O=Object(y.f)(),v=function(){var e=Object(h.a)(f.a.mark((function e(t){var s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,s={email:n,password:a},e.next=5,x.a.post("/api/users/login",s);case 5:r=e.sent,p({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),O.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&b(e.t0.response.data.msg);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){localStorage.setItem("room-id","")}),[]),Object(o.jsxs)("div",{className:"page",children:[Object(o.jsx)("h2",{children:"Login"}),Object(o.jsxs)("form",{className:"login-page__form form",onSubmit:v,children:[Object(o.jsx)("label",{htmlFor:"login-email",children:"Email"}),Object(o.jsx)("input",{id:"login-email",type:"email",onChange:function(e){return s(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"login-password",children:"Password"}),Object(o.jsx)("input",{id:"login-password",type:"password",onChange:function(e){return i(e.target.value)}}),Object(o.jsx)("input",{type:"submit",value:"Login"})]}),j&&Object(o.jsx)(N,{message:j,clearError:function(){return b(void 0)}})]})}),D=n(29),E=n(35),I=n(5),L=n(24),M=n.n(L),G=n(14),F=n.n(G),R=(n(136),n(137),n.p+"static/media/spinner.57e508b9.gif"),T=function(){return Object(o.jsx)("div",{className:"full-page-loader",children:Object(o.jsx)("img",{src:R,className:"full-page-loader__img",alt:"loading"})})},U=n(71),K=n.n(U),P=(n(140),function(e){var t,n=Object(u.useContext)(w).showData,s=Object(u.useContext)(g).userData,r=Object(u.useState)([]),c=Object(m.a)(r,2),a=c[0],i=c[1],l=Object(u.useState)(),d=Object(m.a)(l,2),j=d[0],b=d[1],p=Object(u.useState)(),O=Object(m.a)(p,2),v=(O[0],O[1]),_=window.location.hostname,y=e.creator,S=e.roomCode,N=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(n.results);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){if(N(),t=F()(_),"true"===y){var e=n.results;t.emit("addResults",{data:e,roomCode:S,creator:y})}}),[n]);var k=function(){var e=Object(h.a)(f.a.mark((function e(t,r){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b(t),(c=n.results.find((function(e){return e.netflixid===r}))).roomid=S,c.userid=s.user.id,"right"!==t){e.next=10;break}return e.next=8,x.a.post("/api/shows/accepted",c);case 8:e.next=13;break;case 10:if("left"!==t){e.next=13;break}return e.next=13,x.a.post("/api/shows/rejected",c);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.response.data.msg&&v(e.t0.response.data.msg);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),C=a;return Object(o.jsxs)("div",{className:"cards",children:[0===a.length?Object(o.jsx)("h3",{className:"cards__end-message",children:"End of results"}):n.results.map((function(e){return Object(o.jsx)(K.a,{className:"cards--swipe",preventSwipe:["up","down"],onSwipe:function(t){return k(t,e.netflixid)},onCardLeftScreen:function(){return t=e.netflixid,C=C.filter((function(e){return e.netflixid!==t})),void i(C);var t},children:Object(o.jsx)("div",{style:{backgroundImage:"url(".concat(e.image,")")},className:"cards__card",children:Object(o.jsxs)("div",{className:"cards__card-content",children:[Object(o.jsx)("div",{className:"cards__card-title",dangerouslySetInnerHTML:{__html:"<h3>".concat(e.title,"</h3>")}}),Object(o.jsx)("div",{className:"cards__card-synopsis",dangerouslySetInnerHTML:{__html:"<p>".concat(e.synopsis,"</p>")}}),Object(o.jsxs)("div",{className:"cards__card-tags",children:[e.type?Object(o.jsx)("p",{children:e.type}):null,e.released?Object(o.jsx)("p",{children:e.released}):null,e.runtime?Object(o.jsx)("p",{children:e.runtime}):null]})]})})},e.netflixid)})),j?Object(o.jsxs)("h3",{className:"cards__swipe-direction",children:["You swiped ",j]},j):Object(o.jsx)("h3",{className:"cards__swipe-direction",children:"Swipe a card to get started!"})]})}),H=function(e){var t=e.location,n=Object(u.useContext)(w),r=n.showData,c=n.setShowData,a=Object(u.useState)(void 0),i=Object(m.a)(a,2),l=i[0],d=i[1],j=Object(y.f)(),b=M.a.parse(t.search),p=b.creator,O=b.roomCode,g=window.location.hostname,v=[];for(var _ in r.selectedGenres)v.push(r.selectedGenres[_].id);var S="";r.isMovie&&r.isSeries?S="Any":r.isMovie?S="Movie":r.isSeries&&(S="Series");var N=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),c((function(e){return Object(I.a)(Object(I.a)({},e),{},{results:[]})})),t="https://unogs-unogs-v1.p.rapidapi.com/aaapi.cgi","33",v.forEach((function(e){var n={params:{q:"-!1900,2020-!0,5-!0,10-!".concat(e,"-!").concat(S,"-!Any-!Any-!-!{downloadable}"),t:"ns",cl:"".concat("33"),st:"adv",ob:"Relevance",p:"1",sa:"and"},headers:{"x-rapidapi-key":"db8cfc2ed8mshe05aaa76b4c515ep10e59ajsn59bdcf01f18b","x-rapidapi-host":"unogs-unogs-v1.p.rapidapi.com"}},s=[];x.a.get(t,n).then((function(e){for(var r=1,a=Math.ceil(e.data.COUNT/100);r<=a;){var i=Object(I.a)(Object(I.a)({},n),{},{params:Object(I.a)(Object(I.a)({},n.params),{},{p:"".concat(r)})});x.a.get(t,i).then((function(e){var t,n=Object(E.a)(e.data.ITEMS);try{for(n.s();!(t=n.n()).done;){var r=t.value;s.push({netflixid:r.netflixid,title:r.title,image:r.image,synopsis:r.synopsis,type:r.type,released:r.released,runtime:r.runtime,rating:""===r.rating?0:parseFloat(r.rating)})}}catch(a){n.e(a)}finally{n.f()}c((function(e){return Object(I.a)(Object(I.a)({},e),{},{results:Object(D.a)(new Map([].concat(Object(D.a)(e.results),s).map((function(e){return[e.netflixid,e]}))).values()).sort((function(e,t){return e.rating-t.rating}))})}))})).catch((function(e){console.error(e)})),r+=1}})).catch((function(e){console.error(e)}))})),n=setTimeout((function(){return d(!1)}),3e3),e.abrupt("return",(function(){return clearTimeout(n)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){s=F()(g),"false"===p?(s.emit("getResults",O),s.on("returnResults",(function(e){c((function(t){return Object(I.a)(Object(I.a)({},t),{},{results:e})}))}))):N()}),[]),Object(o.jsx)("div",{className:"page results-page",children:l?Object(o.jsx)(T,{}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{className:"results-page__swipe-instructions",children:"Swipe right to accept and left to reject"}),Object(o.jsx)(P,{roomCode:O,creator:p}),Object(o.jsx)("form",{className:"results-page__done-button form",children:Object(o.jsx)("input",{type:"submit",value:"I'm done swiping!",onClick:function(){return j.push("/waiting?roomCode=".concat(O))}})})]})})},A=(n(141),function(e){var t=Object(u.useState)([]),n=Object(m.a)(t,2),s=n[0],r=n[1],c=Object(u.useState)(void 0),a=Object(m.a)(c,2),i=a[0],l=a[1],d=Object(u.useState)(0),j=Object(m.a)(d,2),b=j[0],p=j[1],O=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n,s,c,a,i,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("room-id"),e.next=3,x.a.get("/api/shows/accepted/".concat(t));case 3:for(o in n=e.sent,s=n.data,c=s.filter((function(e,t,n){return n.findIndex((function(t){return t.netflixid===e.netflixid}))===t})),a={},s.forEach((function(e){a[e.netflixid]=a[e.netflixid]?a[e.netflixid]+1:1})),i=[],a)i.push({id:o,count:a[o]});i.sort((function(e,t){return t.count-e.count})),i=i.map((function(e){return e.id})),u=[],i.forEach((function(e){var t=c.find((function(t){return t.netflixid===e}));u.push(t)})),l(u.length),r(u);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){O()}),[]);return Object(o.jsx)("div",{className:"page final-results-page",children:b<i?Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{className:"final-results-page__header",children:"Based on your group's selections, your recommended movie/show is:"}),function(){var e=s[b];return Object(o.jsx)("div",{className:"final-results-page__recommended",children:Object(o.jsx)("div",{style:{backgroundImage:"url(".concat(null===e||void 0===e?void 0:e.image,")")},className:"final-results-page__card",children:Object(o.jsxs)("div",{className:"final-results-page__card-content",children:[Object(o.jsx)("div",{className:"final-results-page__card-title",dangerouslySetInnerHTML:{__html:"<h3>".concat(null===e||void 0===e?void 0:e.title,"</h3>")}}),Object(o.jsx)("div",{className:"final-results-page__card-synopsis",dangerouslySetInnerHTML:{__html:"<p>".concat(null===e||void 0===e?void 0:e.synopsis,"</p>")}}),Object(o.jsxs)("div",{className:"final-results-page__card-tags",children:[(null===e||void 0===e?void 0:e.type)?Object(o.jsx)("p",{children:null===e||void 0===e?void 0:e.type}):null,(null===e||void 0===e?void 0:e.released)?Object(o.jsx)("p",{children:null===e||void 0===e?void 0:e.released}):null,(null===e||void 0===e?void 0:e.runtime)?Object(o.jsx)("p",{children:null===e||void 0===e?void 0:e.runtime}):null]})]})})})}(),Object(o.jsx)("form",{className:"final-results-page__next-button form",children:Object(o.jsx)("input",{type:"submit",value:"Next recommendation",onClick:function(e){return function(e){e.preventDefault(),p(b+1)}(e)}})})]}):Object(o.jsxs)("div",{className:"final-results-page__end-view",children:[Object(o.jsx)("h3",{className:"final-results-page__end-message",children:"End of recommendations"}),Object(o.jsx)("form",{className:"final-results-page__reset-button form",children:Object(o.jsx)("input",{type:"submit",value:"Click to see again",onClick:function(e){return function(e){e.preventDefault(),p(0)}(e)}})})]})})}),J=(n(142),function(e){var t=Object(u.useContext)(g).userData,n=Object(u.useState)(""),s=Object(m.a)(n,2),c=s[0],a=s[1],i=Object(u.useState)(""),l=Object(m.a)(i,2),d=l[0],j=l[1],b=Object(y.f)(),p=window.location.hostname;Object(u.useEffect)((function(){r=F()(p)}),[p]);var O=function(){var e=Object(h.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),c&&(r.emit("userJoin",c,{user:t.user},(function(){return a("")})),r.on("roomNotFound",(function(e,t){j(e),"Room Found"===e&&b.push("/session?creator=false&&roomCode=".concat(t))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"page",children:[Object(o.jsxs)("form",{className:"join-session-page__form form",onSubmit:O,children:[Object(o.jsx)("label",{htmlFor:"room-code",children:"Room Code"}),Object(o.jsx)("input",{id:"room-code",type:"text",value:c,onChange:function(e){return a(e.target.value)}}),Object(o.jsx)("input",{type:"submit",value:"Enter"})]}),d&&Object(o.jsx)(N,{message:d,clearError:function(){return j(void 0)}})]})}),B=(n(143),n(144),n(145),function(e){var t=Object(u.useContext)(w),n=t.showData,s=t.setShowData;return Object(o.jsxs)("div",{className:"type-select",children:[Object(o.jsx)("h2",{children:"Media Type"}),Object(o.jsxs)("div",{className:"type-select__container",children:[Object(o.jsxs)("div",{className:"type-select__checkbox",children:[Object(o.jsx)("label",{htmlFor:"movie",children:"Movie"}),Object(o.jsx)("input",{type:"checkbox",id:"movie",name:"movie",checked:n.isMovie,onChange:function(e){return function(e){s((function(t){return Object(I.a)(Object(I.a)({},t),{},{isMovie:e.target.checked})}))}(e)}})]}),Object(o.jsxs)("div",{className:"type-select__checkbox",children:[Object(o.jsx)("label",{htmlFor:"series",children:"Shows"}),Object(o.jsx)("input",{type:"checkbox",id:"series",name:"series",checked:n.isSeries,onChange:function(e){return function(e){s((function(t){return Object(I.a)(Object(I.a)({},t),{},{isSeries:e.target.checked})}))}(e)}})]})]})]})}),W=(n(146),n(147),n(148),function(e){var t=Object(u.useState)(!1),n=Object(m.a)(t,2),s=n[0],r=n[1];return Object(o.jsx)("div",{className:"genre-item",children:Object(o.jsx)("button",{type:"button",onClick:function(){return t=e.genre,e.updateSelectedGenres(t),e.setKeyword(""),void r(!s);var t},children:e.genre.name},e.genre.id)})}),q=function(e){return e.keyword&&e.keyword.length>0?Object(o.jsx)("div",{className:"genre-list",children:e.genreList.map((function(t){return Object(o.jsx)(W,{genre:t,updateSelectedGenres:e.updateSelectedGenres,setKeyword:e.setKeyword})}))}):null},V=(n(149),n(72)),Y=n(73),X=(n(152),function(e){var t=Object(u.useContext)(w),n=t.showData,s=t.setShowData;return Object(o.jsxs)("div",{className:"selected-genre",children:[Object(o.jsx)("div",{className:"remove-icon",onClick:function(){return function(e){var t=n.selectedGenres.filter((function(t){return t.id!==e.id}));s((function(e){return Object(I.a)(Object(I.a)({},e),{},{selectedGenres:t})}))}(e.genre)},children:Object(o.jsx)(V.a,{icon:Y.a})}),e.genre.name]})}),z=function(e){var t=Object(u.useContext)(w).showData;return Object(o.jsxs)("div",{className:"selected-genres-list",children:[Object(o.jsx)("p",{children:Object(o.jsx)("b",{children:"Selected"})}),0===t.selectedGenres.length?Object(o.jsx)("p",{children:"No genres selected"}):t.selectedGenres.map((function(e){return Object(o.jsx)(X,{genre:e})}))]})},Q=function(e){var t=Object(u.useContext)(w),n=t.showData,s=t.setShowData;return Object(o.jsxs)("div",{className:"genre-select",children:[Object(o.jsx)("h2",{children:"Genres"}),Object(o.jsxs)("div",{className:"genre-select__search-selected",children:[Object(o.jsxs)("div",{className:"genre-select__search",children:[Object(o.jsx)("input",{className:"genre-select__search-input",type:"search",value:e.keyword,placeholder:"Search Genre",onChange:function(t){return function(t){e.setKeyword(t);var n=e.genreListDefault.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).slice(0,5);e.setGenreList(n)}(t.target.value)}}),Object(o.jsx)(q,{keyword:e.keyword,setKeyword:e.setKeyword,genreList:e.genreList,updateSelectedGenres:function(e){n.selectedGenres.some((function(t){return t.id===e.id}))||s((function(t){return Object(I.a)(Object(I.a)({},t),{},{selectedGenres:[].concat(Object(D.a)(t.selectedGenres),[e])})}))}})]}),Object(o.jsx)(z,{})]})]})},Z=function(e){var t=Object(u.useContext)(w).setShowData,n=Object(u.useState)([]),s=Object(m.a)(n,2),r=s[0],a=s[1],i=Object(u.useState)([]),l=Object(m.a)(i,2),d=l[0],j=l[1],b=Object(u.useState)(""),p=Object(m.a)(b,2),O=p[0],g=p[1],v=Object(y.f)(),_=window.location.hostname,S=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={method:"GET",url:"https://unogs-unogs-v1.p.rapidapi.com/api.cgi",params:{t:"genres"},headers:{"x-rapidapi-key":"db8cfc2ed8mshe05aaa76b4c515ep10e59ajsn59bdcf01f18b","x-rapidapi-host":"unogs-unogs-v1.p.rapidapi.com"}},n=[],x.a.request(t).then((function(e){var t,s=Object(E.a)(e.data.ITEMS);try{for(s.s();!(t=s.n()).done;){var r=t.value;Object.keys(r)[0].includes("All")||n.push({id:Object.values(r)[0][0],name:Object.keys(r)[0]})}}catch(c){s.e(c)}finally{s.f()}a(n)})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){c=F()(_),t({isMovie:!1,isSeries:!1,selectedGenres:[]}),S()}),[]);var N=function(){var t=Object(h.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),c.emit("readyNow",e.room),v.push("/results?creator=true&&roomCode=".concat(e.room));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"option-select",children:[Object(o.jsx)("h1",{children:"Choose your group's filters"}),Object(o.jsx)(B,{}),Object(o.jsx)(Q,{genreListDefault:r,setGenreListDefault:a,genreList:d,setGenreList:j,keyword:O,setKeyword:g}),Object(o.jsx)("div",{className:"option-select__start-button",children:Object(o.jsx)("form",{className:"form",onSubmit:N,children:Object(o.jsx)("input",{type:"submit",value:"Start"})})})]})},$=function(e){var t,n=e.location,s=Object(u.useContext)(g).userData,r=Object(u.useState)(!1),c=Object(m.a)(r,2),i=c[0],l=c[1],d=M.a.parse(n.search),j=d.creator,b=d.roomCode,p=Object(y.f)(),f=window.location.hostname;return t="true"===j?(t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).slice(0,6):b,Object(u.useEffect)((function(){localStorage.setItem("room-id",t),(a=F()(f)).emit("sessioncreate",t,j,{user:s.user}),a.on("roomUsers",(function(e){var t;t=e,document.getElementById("users").innerHTML="\n      ".concat(t.map((function(e){return"<li>".concat(e.name,"</li>")})).join(""),"\n  ")})),a.on("usersReady",(function(e){"false"===j&&l(!0)}))}),[f]),Object(o.jsxs)("div",{className:"session-page page",children:[Object(o.jsx)("div",{className:"session-page__room-info-container",children:Object(o.jsxs)("div",{className:"session-page__room-info",children:[Object(o.jsx)("h2",{children:"Room Info"}),Object(o.jsxs)("p",{children:[Object(o.jsx)("b",{children:"Role:"})," ","true"===j?"Admin":"User"]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("b",{children:"Room Code:"})," ",t]}),Object(o.jsx)("p",{children:Object(o.jsx)("b",{children:"Room Members:"})}),Object(o.jsx)("ul",{id:"users"})]})}),"true"===j?Object(o.jsx)(Z,{room:t,creator:j}):Object(o.jsx)("div",{className:"session-page__start-message",children:Object(o.jsx)("p",{children:"The Start button will appear once the admin is finished selecting your group's filters"})}),i&&Object(o.jsx)("form",{className:"session-page__start-button form",children:Object(o.jsx)("input",{type:"submit",value:"Start",onClick:function(){return p.push("/results?roomCode=".concat(t,"&&creator=").concat(j))}})})]})},ee=(n(153),function(e){var t=e.location,n=Object(y.f)(),s=M.a.parse(t.search).roomCode,r=Object(u.useContext)(g).userData,c=Object(u.useState)(!1),a=Object(m.a)(c,2),l=a[0],d=a[1],j=window.location.hostname;return Object(u.useEffect)((function(){(i=F()(j)).emit("waiting",s,{user:r.user}),i.on("done",(function(){d(!0)}))}),[j]),Object(o.jsxs)("div",{className:"waiting-page page",children:[Object(o.jsxs)("div",{className:"waiting-page__message",children:[Object(o.jsx)("h1",{children:"Welcome to the waiting room"}),Object(o.jsx)("h2",{children:"Please wait for everyone to finish their selections"})]}),l&&Object(o.jsxs)("div",{className:"waiting-page__button-container",children:[Object(o.jsx)("h3",{children:"You may now continue to the final recommendations"}),Object(o.jsx)("form",{className:"waiting-page__next-button form",children:Object(o.jsx)("input",{type:"submit",value:"Next",onClick:function(){return n.push("/final")}})})]})]})}),te=function(){var e=[{name:"Home",path:"/",Component:S},{name:"Register",path:"/register",Component:k},{name:"Login",path:"/login",Component:C},{name:"Results",path:"/results",Component:H},{name:"FinalResults",path:"/final",Component:A},{name:"JoinSession",path:"/join",Component:J},{name:"Session",path:"/session",Component:$},{name:"Waiting",path:"/waiting",Component:ee}];return Object(o.jsx)(y.c,{children:e.map((function(e){return Object(o.jsx)(y.a,{exact:!0,path:e.path,component:e.Component},e.name)}))})},ne=(n(154),n(155),function(e){var t=Object(u.useContext)(g),n=t.userData,s=t.setUserData,r=Object(y.f)();return Object(o.jsx)("nav",{className:"auth-options",children:n.user?Object(o.jsx)("button",{onClick:function(){s({token:void 0,user:void 0}),localStorage.setItem("auth-token",""),r.push("/")},children:"Logout"}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("button",{onClick:function(){r.push("/register")},children:"Register"}),Object(o.jsx)("button",{onClick:function(){r.push("/login")},children:"Login"})]})})}),se=function(e){return Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)(b.b,{to:"/",children:Object(o.jsx)("h1",{className:"header__title",children:"flicker"})}),Object(o.jsx)(ne,{})]})},re=function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(v,{children:Object(o.jsx)(_,{children:Object(o.jsxs)(b.a,{children:[Object(o.jsx)(se,{}),Object(o.jsx)("div",{className:"container",children:Object(o.jsx)(te,{})})]})})})})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))};j.a.render(Object(o.jsx)(l.a.StrictMode,{children:Object(o.jsx)(re,{})}),document.getElementById("root")),ce()},79:function(e,t,n){},97:function(e,t,n){}},[[156,1,2]]]);
//# sourceMappingURL=main.74d5cb82.chunk.js.map